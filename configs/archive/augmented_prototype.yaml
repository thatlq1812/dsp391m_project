# Prototype configuration - 1 month for testing

# Base patterns (same as full)
base_patterns:
  weekday_morning_rush: [6, 9]
  weekday_evening_rush: [16, 19]
  weekend_leisure: [9, 18]
  night_speed_multiplier: 1.15
  rush_hour_reduction: 0.65

  highway_speed_range: [35, 52]
  main_road_range: [25, 45]
  local_road_range: [15, 35]

  base_noise_std: 3.0
  temporal_smoothing: 3

# Spatial (same)
spatial:
  topology_file: data/processed/all_runs_gapfilled_week.parquet
  use_existing_edges: true
  num_edges: 144
  num_nodes: 62

  incident_propagation:
    direct_impact: [0.7, 0.9]
    hop_1_impact: [0.3, 0.5]
    hop_2_impact: [0.1, 0.2]
    hop_3_impact: [0.0, 0.05]

  construction_spillover:
    adjacent_impact: [0.2, 0.3]

# Temporal - REDUCED TO 1 MONTH
temporal:
  start_date: "2024-01-01"
  duration_days: 30 # Only 1 month
  interval_minutes: 10
  total_timestamps: 4320 # 30 * 24 * 6

# Incidents (proportional)
incidents:
  enabled: true
  rate_per_week: 3

  types:
    - name: minor_accident
      probability: 0.5
      duration_range: [30, 60]
      severity_range: [0.6, 0.8]

    - name: major_accident
      probability: 0.3
      duration_range: [60, 180]
      severity_range: [0.8, 0.95]

    - name: vehicle_breakdown
      probability: 0.2
      duration_range: [20, 45]
      severity_range: [0.3, 0.5]

  recovery_time: 30
  peak_hours_multiplier: 1.5

# Construction (reduced)
construction:
  enabled: true
  num_zones_per_year: 2 # Only 2 zones for 1 month

  duration_range: [7, 14] # Shorter durations
  active_hours: [9, 17]
  speed_reduction: [0.4, 0.6]

  quarters:
    Q1: [0, 2]

# Weather (same probabilities)
weather:
  enabled: true

  rain:
    probability_by_month:
      1: 0.05 # January (dry season)

    light_rain:
      duration_range: [60, 120]
      speed_reduction: [0.1, 0.15]
      probability: 0.7

    heavy_rain:
      duration_range: [30, 90]
      speed_reduction: [0.3, 0.4]
      probability: 0.3

  fog:
    probability: 0.05
    hours: [6, 9]
    speed_reduction: [0.2, 0.3]

# Special events (reduced)
special_events:
  enabled: true
  per_month: 2 # 2 events in 1 month

  types:
    - name: concert
      probability: 0.3
      duration: 180
      congestion_multiplier: 1.5
      affected_radius: 2
      hours: [18, 21]

    - name: sports_match
      probability: 0.3
      duration: 150
      congestion_multiplier: 1.8
      affected_radius: 2
      hours: [19, 22]

    - name: festival
      probability: 0.2
      duration: 300
      congestion_multiplier: 1.3
      affected_radius: 3
      hours: [14, 19]

    - name: parade
      probability: 0.2
      duration: 120
      congestion_multiplier: 2.0
      affected_radius: 1
      hours: [9, 12]

  venues:
    - edges: [10, 15, 20]
    - edges: [50, 55, 60]
    - edges: [100, 105, 110]

# Holidays (only New Year)
holidays:
  enabled: true

  fixed:
    - name: "New Year"
      date: "01-01"
      duration: 1
      traffic_reduction: 0.5

  lunar: [] # Skip for prototype

  long_weekends:
    friday_evening_increase: 0.5
    sunday_evening_increase: 0.5
    saturday_reduction: 0.3

# Seasonal (simplified)
seasonal:
  enabled: true

  school_calendar:
    school_year: [[9, 1], [5, 31]]
    morning_rush_increase: 0.25
    afternoon_pickup: [15, 16]
    summer_reduction: 0.2

  economic_cycles:
    month_end_increase: 0.15
    quarter_end_increase: 0.2
    affected_areas: [0, 30]

# Validation (same)
validation:
  min_speed: 3.0
  max_speed: 52.0
  max_jump_per_timestep: 15.0
  min_autocorr_lag12: 0.70
  max_autocorr_lag12: 0.95
  spatial_correlation_threshold: 0.5

# Output
output:
  format: parquet
  compression: snappy
  chunk_size: 10000

  columns:
    - timestamp
    - node_a_id
    - node_b_id
    - speed_kmh
    - is_incident
    - is_construction
    - weather_condition
    - is_holiday
    - temperature_c
    - precipitation_mm
    - wind_speed_kmh
    - humidity_percent

  metadata_files:
    - super_dataset_metadata.json
    - super_dataset_statistics.json
    - super_dataset_splits.json

# Splits (simplified for 1 month)
splits:
  strategy: temporal_with_gap

  train:
    start_month: 1
    end_month: 1
    percentage: 0.70

  gap:
    duration_weeks: 0 # No gap for prototype

  val:
    start_month: 1
    end_month: 1
    percentage: 0.15

  test:
    start_month: 1
    end_month: 1
    percentage: 0.15

# Random seed
random_seed: 42
